<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./头像.ico" type="image/x-icon">
    <title>日历</title>
    <link rel="stylesheet" href="./index.css">
    <script>
        // 检测当前页面宽度，若为移动端，则转到移动端受限页面中
        if (window.innerWidth < 750) {
            location.href = "/minScreen.html";
        }
        window.onresize = function() {
            console.log(window.innerWidth);
            if (window.innerWidth < 750) {
                location.href = "/minScreen.html";
            }
        }
    </script>
</head>

<body>
    <div class="hoverContainer">
        <div class="time">
            <h1>12:51:48</h1>
            <p>2020年12月7日</p>
        </div>
        <div class="date">
            <span class="d">2020-12-07</span>
            <span class="l"></span>
            <span class="r"></span>
        </div>
        <table>
            <tr>
                <th>一</th>
                <th>二</th>
                <th>三</th>
                <th>四</th>
                <th>五</th>
                <th>六</th>
                <th>七</th>
            </tr>
            <tr>
                <td class="disable light_hover"><span>29</span><span>廿一</span></td>
                <td class="disable light_hover"><span>30</span><span>廿二</span></td>
                <td class="disable light_hover"><span>31</span><span>廿三</span></td>
                <td class="light_hover"><span>1</span><span>廿四</span></td>
                <td class="light_hover"><span>2</span><span>廿五</span></td>
                <td class="light_hover"><span>3</span><span>廿六</span></td>
                <td class="light_hover"><span>4</span><span>廿七</span></td>
            </tr>
            <tr>
                <td class="light_hover"><span>5</span><span>廿八</span></td>
                <td class="light_hover"><span>6</span><span>廿九</span></td>
                <td class="light_hover"><span>7</span><span>立冬</span></td>
                <td class="light_hover"><span>8</span><span>十月</span></td>
                <td class="light_hover"><span>9</span><span>初二</span></td>
                <td class="light_hover"><span>10</span><span>初三</span></td>
                <td class="light_hover"><span>11</span><span>初四</span></td>
            </tr>
            <tr>
                <td class="light_hover"><span>12</span><span>初五</span></td>
                <td class="light_hover"><span>13</span><span>初六</span></td>
                <td class="light_hover"><span>14</span><span>初七</span></td>
                <td class="light_hover"><span>15</span><span>初八</span></td>
                <td class="light_hover"><span>16</span><span>初九</span></td>
                <td class="light_hover"><span>17</span><span>初十</span></td>
                <td class="light_hover"><span>18</span><span>十一</span></td>
            </tr>
            <tr>
                <td class="light_hover"><span>19</span><span>十二</span></td>
                <td class="light_hover"><span>20</span><span>十三</span></td>
                <td class="light_hover"><span>21</span><span>十四</span></td>
                <td class="light_hover"><span>22</span><span>小雪</span></td>
                <td class="light_hover"><span>23</span><span>十六</span></td>
                <td class="light_hover"><span>24</span><span>十七</span></td>
                <td class="light_hover"><span>25</span><span>十八</span></td>
            </tr>
            <tr>
                <td class="light_hover"><span>26</span><span>十九</span></td>
                <td class="light_hover"><span>27</span><span>二十</span></td>
                <td class="light_hover"><span>28</span><span>廿一</span></td>
                <td class="light_hover"><span>29</span><span>廿二</span></td>
                <td class="light_hover"><span>30</span><span>廿三</span></td>
                <td class="disable light_hover"><span>1</span><span>廿四</span></td>
                <td class="disable light_hover"><span>2</span><span>廿五</span></td>
            </tr>
            <tr>
                <td class="light_hover"><span>26</span><span>十九</span></td>
                <td class="light_hover"><span>27</span><span>二十</span></td>
                <td class="light_hover"><span>28</span><span>廿一</span></td>
                <td class="light_hover"><span>29</span><span>廿二</span></td>
                <td class="light_hover"><span>30</span><span>廿三</span></td>
                <td class="disable light_hover"><span>1</span><span>廿四</span></td>
                <td class="disable light_hover"><span>2</span><span>廿五</span></td>
            </tr>
        </table>
        <div class="date2">
            <span class="d2">2020-12-07</span>

        </div>
    </div>
    <script src="./light_hover.js"></script>
    <script src="./lunar_calendar_new.js"></script>
    <script src="./setTime.js"></script>
    <script>
        //光晕效果
        lightHover();
        // 时间
        getDate();
        setInterval(getDate, 1000);
        // 日历设置
        setCalendar();
        document.querySelector(".date .r").addEventListener("click", () => {
            var nowDate = document.querySelector(".date .d").innerHTML;
            var date = new Date(nowDate);
            date.setMonth(date.getMonth() + 1);
            var month = date.getMonth() + 1;
            var day = date.getDate();
            setCalendar(date.getFullYear() + '-' + getFormatDate(month) + '-' + getFormatDate(day));

        })
        document.querySelector(".date .l").addEventListener("click", () => {
                var nowDate = document.querySelector(".date .d").innerHTML;
                var date = new Date(nowDate);
                date.setMonth(date.getMonth() - 1);
                var month = date.getMonth() + 1;
                var day = date.getDate();
                setCalendar(date.getFullYear() + '-' + getFormatDate(month) + '-' + getFormatDate(day));

            })
            //点击生成蓝色边框
        function noBlue() {
            var dateBox = document.querySelectorAll("td");
            //排他
            for (let i = 0; i < dateBox.length; i++) {
                const element = dateBox[i];
                element.classList.remove("click");
            }

        }
        (function() {
            var dateBox = document.querySelectorAll("td");
            //绑定事件
            for (let i = 0; i < dateBox.length; i++) {
                const element = dateBox[i];
                element.addEventListener("click", function() {
                    noBlue();
                    element.classList.add("click");
                    if (getYMD(new Date(element.dataset.date)) == getYMD(new Date())) {
                        document.querySelector(".date2 .d2").innerHTML = "今天 " + calendar.getLunartoDay(element.dataset.date);

                    } else {
                        document.querySelector(".date2 .d2").innerHTML = calendar.getLunartoDay(element.dataset.date);

                    }

                })
            }

        })()




        console.log("%c案例GitHub地址：https://github.com/queuecat/light-hover", "color:#0aa");
    </script>
</body>

</html>